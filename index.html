<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="icon" type="image/png" href="images/icon.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Re:Pitch:RIDDIM</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0b0b0d">
</head>

<body>
    <div class="content">
    <h1>Re:Pitch:RIDDIM</h1>
    <div class="divcont">
      <div class="drop-area">
        <div id="drop_zone" class="drop-zone">
          <div>
          <p>1 - Select or drop your audio files here</p>
          <p>2 - Adjust options below</p>
          <p>3 - Process and Download your files</p>
        </div>
          <input type="file" id="fileInput" accept="audio/*" multiple style="display: none;">
        </div>
        <div class="control-actions">
          <p id="fileStatus" class="file-status">No files selected.</p>
          <div class="button-row">
            <button class="primary" id="processButton" disabled>Process &amp; Download</button>
          </div>
          <div class="download-options">
        <div>
          <input type="radio" id="download.auto" name="download.mode" value="auto" checked />
          <label for="download.auto">Auto (zip when handling multiple files)</label>
        </div>
        <div>
          <input type="radio" id="download.zip" name="download.mode" value="zip" />
          <label for="download.zip">Always zip downloads</label>
        </div>
        <div>
          <input type="radio" id="download.individual" name="download.mode" value="individual" />
          <label for="download.individual">Always download individually</label>
        </div>
      </div>
        </div>
      </div>
    </div>
    <div class="information items panel options-row">
      <div class="fidelity">
        <p><b>Fidelity</b></p>
        <div>
          <input type="radio" id="sd" name="fidelity" value="sd" />
          <label for="sd">CD (16/46)</label>
        </div>
        <div>
          <input type="radio" id="EP-40" name="fidelity" value="EP-40" checked />
          <label for="EP-40">EP-40 (16/22)</label>
        </div>

        <div>
          <input type="radio" id="SP-1200" name="fidelity" value="SP-1200" />
          <label for="SP-1200">SP-1200 8 Bit (8/26)</label>
        </div>
        <div>
          <input type="radio" id="SP-1201" name="fidelity" value="SP-1201" />
          <label for="SP-1201">SP-1200 16 Bit (16/26)</label>
        </div>
        <div>
          <input type="radio" id="SK-1" name="fidelity" value="SK-1" />
          <label for="SK-1">SK-1 (8/9)</label>
        </div>
      </div>
      <div class="speed">
        <p><b>Speed</b></p>
        <div>
          <input type="radio" id="1x" name="speed" value="1x" checked />
          <label for="1x">1x</label>
        </div>
        <div>
          <input type="radio" id="2x" name="speed" value="2x" />
          <label for="2x">2x</label>
        </div>
        <div>
          <input type="radio" id="4x" name="speed" value="4x" />
          <label for="4x">4x</label>
        </div>
      </div>
      <div class="channels">
        <p><b>Channels</b></p>
        <div>
          <input type="radio" id="2" name="channels" value="2"/>
          <label for="2">Stereo</label>
        </div>
        <div>
          <input type="radio" id="1" name="channels" value="1" checked/>
          <label for="1">Mono</label>
        </div>

      </div>
      <div class="filename">
        <p><b>Rename File?</b></p>
        <div>
          <input type="radio" id="1" name="filename" value="true"/>
          <label for="1">Rename to BPM and Key</label>
        </div>
        <div>
          <input type="radio" id="2" name="filename" value="false" checked/>
          <label for="2">Keep Original Filename</label>
        </div>
        <div class="manual-bpm">
          <label for="manualBpm"><b>Manual BPM (optional)</b></label>
          <input type="number" name="manualBpm" id="manualBpm" min="40" max="300" placeholder="e.g. 120">
          <p class="input-hint">Used when renaming files; overrides detected BPM.</p>
        </div>
      </div>
    </div>
    <form id="ko2Form">
      <details class="information panel" open>
        <summary>
          <b>EP-40 Settings</b>
          <input type="checkbox" role="switch" id="ko2FormToggle" checked style="margin-left: 2em;">
        </summary>

        <fieldset id="ko2FormFieldset" class="items options-row">
          <p class="volume-slider">
            <output class="price-output" for="sound.amplitude"></output>
            <input type="range" orient="vertical" name="sound.amplitude" id="sound.amplitude" value="100" min="0" max="200" list="amplitudelist" />
            <label for="sound.amplitude"><b>Volume</b></label>
            <datalist id="amplitudelist">
              <option value="0">0</option>
              <option value="100">100</option>
              <option value="200">200</option>
            </datalist>
          </p>
          <div class="grid-container">
            <div>
              <label for="sound.pan">
                <b>Pan</b>
                <output class="price-output" for="sound.pan"></output>
              </label>
              <input type="range" name="sound.pan" id="sound.pan" value="0" min="-16" max="16" list="panlist"/>
              <datalist id="panlist">
                <option value="-16">L</option>
                <option value="0">C</option>
                <option value="16">R</option>
              </datalist>
            </div>
            <div>
              <label for="sound.pitch">
                <b>Pitch</b>
                <output class="price-output" for="sound.pitch"></output>
              </label>
              <input type="range" name="sound.pitch" id="sound.pitch" value="0" min="-12" max="12" list="pitchlist" style="margin-bottom: 2em" />
              <datalist id="pitchlist">
                <option value="-12">-12</option>
                <option value="0">0</option>
                <option value="12">12</option>
              </datalist>
            </div>

            <div>
              <label for="envelope.attack">
                <b>Attack</b>
                <output class="price-output" for="envelope.attack"></output>
              </label>
              <input type="range" name="envelope.attack" id="envelope.attack" value="0" min="0" max="255" />
            </div>
            <div>
              <label for="envelope.release">
                <b>Release</b>
                <output class="price-output" for="envelope.release"></output>
              </label>
              <input type="range" name="envelope.release" id="envelope.release" value="255" min="0" max="255" />
            </div>
          </div>

          <div>
            <p><b>Playmode</b></p>
            <div>
              <input type="radio" id="sound.playmode.oneshot" name="sound.playmode" value="oneshot" />
              <label for="sound.playmode.oneshot">Oneshot</label>
            </div>
            <div>
              <input type="radio" id="sound.playmode.key" name="sound.playmode" value="key" />
              <label for="sound.playmode.key">Key</label>
            </div>
            <div>
              <input type="radio" id="sound.playmode.legato" name="sound.playmode" value="legato" />
              <label for="sound.playmode.legato">Legato</label>
            </div>
            <div style="margin-bottom: 1.8em">
              <input type="radio" id="sound.playmode.loop" name="sound.playmode" value="loop" checked />
              <label for="sound.playmode.loop">Loop (Only EP-40)</label>
            </div>

            <div>
              <p><label for="sound.rootnote"><b>Rootnote</b></label></p>
              <input type="number" name="sound.rootnote" id="sound.rootnote" value="60" min="0" max="127" />
              <output class="price-output" for="sound.rootnote"></output>
            </div>
          </div>

          <div>
            <p><b>Time Stretch</b></p>
            <div>
              <input type="radio" id="time.mode.off" name="time.mode" value="off" />
              <label for="time.mode.off">Off</label>
            </div>
            <div>
              <input type="radio" id="time.mode.bpm" name="time.mode" value="bpm" checked/>
              <label for="time.mode.bpm">BPM</label>
            </div>
            <div>
              <input type="radio" id="time.mode.bar" name="time.mode" value="bar" />
              <label for="time.mode.bar">Bar</label>
            </div>
          </div>
        </fieldset>

        <p><i>The <b>"Playmode"</b> and <b>"Time Stretch"</b> options set the respective settings only on Teenage Engineering EP devices. They are ignored in other samplers. Loop mode is only supported on EP-40 RIDDIM.</i></p>
                  <p>Use <a href="https://teenage.engineering/apps/ep-sample-tool" target="_blank">EP Tool</a> to put the files onto your EP sampler</p>
      </details>
    </form>
  
    <div class="footer">
        <p>Original Applications Made by <a href="https://yuugo.xyz">YÅ«go</a> with massive help from <a href="https://brianholt.ca/">Brian Holt</a> <br> Darkmode by <a href="https://darkmodejs.learn.uno/">Darkroom.js</a></p>
        <p>Riddim Modifications and Fork by <a href="https://github.com/geleeroyale/repitch-riddimok - lka">geleeroyale</a></p>
    </div>
</body>

</html>

<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<script src="script.js"></script>
<script>
  function addDarkmodeWidget() {
    new Darkmode().showWidget();
  }
  window.addEventListener('load', addDarkmodeWidget);
</script>
